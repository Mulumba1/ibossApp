{% extends "user/base.html" %}

{% block content %}
<br><br><br>
<div class="container-fluid bg-light">
<div class="row">
<div class="col-lg-6 my-5 mx-auto bg-light">
    <div><h3 class="text-center"><strong>EDIT PROFILE</strong></h3></div>
    
    <form action="" method="post">
        {{ edit.csrf_token }}
        <div class="form-group">    
            <input type ="hidden" name= "csrf_token" value="{{ csrf_token() }}">
            </div>

            <div class="form form-group d-flex justify-content-between">
                <div class="form-group" id="editdata">
                  {{edit.email.label(class="form-control-label")}}
                  {{edit.email(class="form-control")}}
                </div>
                <div class="form-group" id="editdata">
                  {{edit.phone.label(class="form-control-label")}}
                  {{edit.phone(class="form-control")}}
                </div>
              </div>

       <div class="form-group">
          {{edit.address.label(class="form-control-label")}}
          {{edit.address(class="form-control")}}
       </div>
         
       <div class="form-group row mb-3">
        <div class="col-md-4">
            {{edit.dob.label(class="form-control-label")}}
            {{edit.dob(class="form-control")}}
         </div>
        
        <div class="col-md-4">
            {{edit.state.label(class="form-control-label")}}
          <select name="state" id="state" class="form-control">
            <option value="">Select State</option>
            {% for state in states %}
            <option value="{{ state.state_id }}">{{ state.state_name }}</option>
            {% endfor %}
          </select>
         </div>
         <div class="col-md-4">
            {{edit.lga.label(class="form-control-label")}}
          <select name="lga" id="lga" class="form-control">
            <option value="">Select LGA</option>
          </select>
        </div>
      
      
      </div>

           <div class="form form-group d-flex justify-content-between">
            <div class="form-group"  id="editdata">
                {{edit.submit(class="form-control btn butto")}}
    
               </div>
               <div class="form-group"  id="editdata">
                {{edit.cancel(class="form-control btn btn-danger")}}
    
               </div>
           </div>

    </form>
</div>
</div>

<script src="{{url_for('static', filename='vendor/jquery/jquery.min.js')}}"></script>
<script src="{{url_for('static', filename='vendor/bootstrap/js/bootstrap.bundle.min.js')}}"></script>

 
<script>
    
    
    $('#state').change(function(){
      var state_id = $(this).val()
      var csrf = '{{ csrf_token() }}'
      $.ajax({
        url: '/state/lgas/',
        type: 'POST',
        data: {"state_id":state_id, "csrf_token":csrf},
        beforeSend: function(){
          $('#lga').html('')
        },
        success: function(resp){
          $('#lga').append("<option value=''>select LGA</option>")
          for (let index = 0; index < resp.length; index++){
            $('#lga').append(`<option value='${resp[index].lga_id}'>${resp[index].lga_name}</option>`);
          }
        }
      })
    })

</script>
</div>


{% endblock %}